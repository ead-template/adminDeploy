"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[527],{9527:(Te,D,u)=>{u.r(D),u.d(D,{BibliotecaModule:()=>xe});var h=u(3144),f=u(5671),S=u(6814),p=u(5828),g=u(1413),s=u(6223),e=u(6954),C=u(6666),b=u(6896),Z=u(5219),_=u(707),x=u(3965),v=u(6256),U=u(3904);function O(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",15),e._uU(2,"Nome "),e._UZ(3,"p-sortIcon",16),e.qZA(),e.TgZ(4,"th",17),e._uU(5,"Ativo "),e._UZ(6,"p-sortIcon",18),e.qZA(),e.TgZ(7,"th"),e._uU(8,"A\xe7\xf5es"),e.qZA()())}function M(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"tr",19)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"p-button",20),e.NdJ("onClick",function(){var l=e.CHM(a).$implicit,c=e.oxw(2);return e.KtG(c.editTheme(l))}),e.qZA(),e.TgZ(7,"p-button",21),e.NdJ("onClick",function(){var l=e.CHM(a).$implicit,c=e.oxw(2);return e.KtG(c.onRemoveTema(l))}),e.qZA()()()}if(2&i){var o=n.$implicit;e.xp6(2),e.Oqu(o.nome),e.xp6(2),e.Oqu(o.ativo?"Sim":"N\xe3o"),e.xp6(2),e.Q6J("styleClass","mr-2"),e.xp6(1),e.Q6J("styleClass","p-button-danger")}}var R=function(){return[10,20,30,50]};function Q(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"p-table",12),e.NdJ("onLazyLoad",function(t){e.CHM(a);var l=e.oxw();return e.KtG(l.loadData(t))}),e.YNc(1,O,9,0,"ng-template",13),e.YNc(2,M,8,4,"ng-template",14),e.qZA()}if(2&i){var o=e.oxw();e.Q6J("value",o.temas)("lazy",!0)("loading",o.isLoading)("paginator",!0)("rows",o.searchParams.tamanho)("totalRecords",o.totalRecords)("rowsPerPageOptions",e.DdM(7,R))}}var B=function(){return{label:"Ativo",value:"true"}},G=function(){return{label:"Inativo",value:"false"}},$=function(){return{label:"Todos",value:""}},j=function(n,a,o){return[n,a,o]},H=function(){var i=function(){function n(a,o,r,t,l){(0,f.Z)(this,n),this.themeService=a,this.notificationService=o,this.router=r,this.cdRef=t,this.confirmationService=l,this.temas=[],this.previousSearchParams=null,this.searchParams={pagina:0,tamanho:30,ordenacao:"nome",direcao:"asc"},this.isLoading=!1,this.totalRecords=0,this.searchForm=new s.cw({nome:new s.NI(null),ativo:new s.NI(null),descricao:new s.NI(null)})}return(0,h.Z)(n,[{key:"onSort",value:function(o){this.searchParams.ordenacao=o.field,this.searchParams.direcao=1===o.order?"asc":"desc",this.handleFormSubmit(this.searchParams)}},{key:"handleFormSubmit",value:function(o){var r,t,l=this,c={nome:null!==(r=o.nome)&&void 0!==r?r:"",ativo:null!==(t=o.ativo)&&void 0!==t?t:void 0,direcao:this.searchParams.direcao,descricao:this.searchParams.descricao,ordenacao:this.searchParams.ordenacao,pagina:this.searchParams.pagina,tamanho:this.searchParams.tamanho};this.searchParams=(0,g.Z)((0,g.Z)({},this.searchParams),c),JSON.stringify(this.searchParams)!==JSON.stringify(this.previousSearchParams)&&(this.isLoading=!0,this.cdRef.detectChanges(),this.previousSearchParams=(0,g.Z)({},this.searchParams),this.themeService.filterThemes(this.searchParams).subscribe({next:function(d){l.notificationService.showSuccess("Sucesso","Busca realizada com sucesso !"),l.temas=d.resultados,l.isLoading=!1,l.totalRecords=d.totalElementos,l.cdRef.detectChanges()},error:function(d){console.error("Error:",d),l.notificationService.showError("Error",d&&d.message?d.message:"N\xe3o foi poss\xedvel buscar os temas ! Tente novamente mais tarde"),l.isLoading=!1}}))}},{key:"editTheme",value:function(o){o&&this.router.navigate(["/biblioteca/tema",o.uuid])}},{key:"addNewTheme",value:function(){this.router.navigate(["/biblioteca/tema/novo"])}},{key:"loadData",value:function(o){this.searchParams.pagina=void 0!==o.first&&o.rows?o.first/o.rows:0,this.searchParams.tamanho=o.rows?o.rows:50,this.searchParams.ordenacao=Array.isArray(o.sortField)?o.sortField.length>0?o.sortField[0]:"":null!==o.sortField?o.sortField:void 0,this.searchParams.direcao=1===o.sortOrder?"asc":"desc",this.handleFormSubmit(this.searchForm.value)}},{key:"onRemoveTema",value:function(o){var r=this;this.confirmationService.confirm({message:"Voc\xea tem certeza que deseja remover este arquivo?",accept:function(){o&&o.uuid&&r.themeService.deleteTheme(o.uuid).subscribe({next:function(){r.temas=r.temas.filter(function(c){return c.uuid!==o.uuid}),r.notificationService.showSuccess("Sucesso","Tema removido com sucesso")},error:function(c){console.error("Error:",c),r.notificationService.showError("Error",c&&c.message?c.message:"N\xe3o foi poss\xedvel remover o tema! Tente novamente mais tarde")}})}})}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(C.d),e.Y36(b.g),e.Y36(p.F0),e.Y36(e.sBO),e.Y36(Z.YP))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tema"]],decls:21,vars:12,consts:[[1,"card"],[1,"formgroup-inline",3,"formGroup","ngSubmit"],[1,"field"],["for","nome",1,"p-sr-only"],["id","nome","formControlName","nome","pInputText","","placeholder","Nome do Tema",1,"p-2"],["for","descricao",1,"p-sr-only"],["id","descricao","formControlName","descricao","pInputText","","placeholder","Descricao do Tema",1,"p-2"],["for","ativo",1,"p-sr-only"],["id","ativo","formControlName","ativo","placeholder","Ativo",3,"options"],["type","submit","label","Buscar",3,"disabled","loading"],["label","Novo","icon","pi pi-plus",1,"ml-3",3,"onClick"],["class","p-datatable-striped  animate-fade-in","sortMode","single",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad",4,"ngIf"],["sortMode","single",1,"p-datatable-striped","animate-fade-in",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","nome"],["field","nome"],["pSortableColumn","ativo"],["field","ativo"],[1,"zebrado"],["icon","pi pi-pencil",3,"styleClass","onClick"],["icon","pi pi-trash",3,"styleClass","onClick"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Busca de Temas"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.handleFormSubmit(o.searchForm.value)}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"Nome"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Nome"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",2)(13,"label",7),e._uU(14,"Ativo"),e.qZA(),e._UZ(15,"p-dropdown",8),e.qZA(),e._UZ(16,"p-button",9),e.TgZ(17,"p-button",10),e.NdJ("onClick",function(){return o.addNewTheme()}),e.qZA()()(),e.TgZ(18,"div"),e.YNc(19,Q,3,8,"p-table",11),e.qZA(),e._UZ(20,"p-confirmDialog")),2&a&&(e.xp6(3),e.Q6J("formGroup",o.searchForm),e.xp6(12),e.Q6J("options",e.kEZ(8,j,e.DdM(5,B),e.DdM(6,G),e.DdM(7,$))),e.xp6(1),e.Q6J("disabled",!o.searchForm.valid||o.isLoading)("loading",o.isLoading),e.xp6(3),e.Q6J("ngIf",o.temas))},dependencies:[S.O5,_.zx,Z.jx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.Lt,v.iA,v.lQ,v.fz,U.Q]}),i}(),q=u(4664),A=u(2096),y=u(8057),F=u(4532),P=function(){var i=function(){function n(a,o,r,t,l){(0,f.Z)(this,n),this.fb=a,this.themeService=o,this.notificationService=r,this.router=t,this.route=l,this.themeForm=new s.cw({}),this.uuid=null}return(0,h.Z)(n,[{key:"ngOnInit",value:function(){var o=this;this.themeForm=this.fb.group({nome:["",s.kI.required],ativo:[!0,s.kI.required],descricao:["",s.kI.required]});var r=this.route.snapshot.paramMap.get("id");r&&"novo"!==r&&this.themeService.getThemeById(r).pipe((0,q.w)(function(t){return t&&(o.uuid=t.uuid,o.themeForm.patchValue({nome:t.nome,ativo:t.ativo,descricao:t.descricao})),(0,A.of)(null)})).subscribe({error:function(l){console.error(l),o.notificationService.showError("Erro","Erro ao carregar dados")}})}},{key:"onSubmit",value:function(){var o=this;this.themeForm.valid&&(this.uuid?this.themeService.updateTheme(this.uuid,this.themeForm.value).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","Tema atualizado com sucesso"),o.router.navigate(["/biblioteca/tema"])},error:function(t){console.error(t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao atualizar o tema")}}):this.themeService.createTheme(this.themeForm.value).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","Tema criado com sucesso"),o.router.navigate(["/biblioteca/tema"])},error:function(t){console.error("An error occurred while creating theme",t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao criar o tema")}}))}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(s.qu),e.Y36(C.d),e.Y36(b.g),e.Y36(p.F0),e.Y36(p.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tema-detalhe"]],decls:19,vars:3,consts:[["header","Detalhes do Tema"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12","flex","flex-column"],["htmlFor","nome"],["pInputText","","id","nome","formControlName","nome","placeholder","Nome do Tema",1,"p-2"],["for","descricao"],["pInputText","","id","descricao","formControlName","descricao","placeholder","Descri\xe7\xe3o do Tema",1,"p-2"],[1,"field","col-12","md:col-12"],["for","ativo"],["id","ativo","formControlName","ativo",3,"binary"],[1,"field","col-12","md:col-1"],["label","Voltar",1,"p-button-secondary","p-mr-2",3,"onClick"],["type","submit","label","Salvar",3,"disabled"]],template:function(a,o){1&a&&(e.TgZ(0,"p-card",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Nome"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"Descri\xe7\xe3o"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Ativo"),e.qZA(),e._UZ(14,"p-checkbox",10),e.qZA(),e.TgZ(15,"div",11)(16,"p-button",12),e.NdJ("onClick",function(){return o.router.navigate(["/biblioteca/tema"])}),e.qZA()(),e.TgZ(17,"div",11),e._UZ(18,"p-button",13),e.qZA()()()()),2&a&&(e.xp6(1),e.Q6J("formGroup",o.themeForm),e.xp6(13),e.Q6J("binary",!0),e.xp6(4),e.Q6J("disabled",!o.themeForm.valid))},dependencies:[_.zx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,y.XZ,F.Z]}),i}(),J=u(553),T=u(9862),k=function(){var i=function(){function n(a){(0,f.Z)(this,n),this.http=a,this.baseUrl="".concat(J.N.apiContext,"/video")}return(0,h.Z)(n,[{key:"obterVideos",value:function(o){var r=new T.LE;return null!=o&&(r=r.set("ativo",o.toString())),this.http.get(this.baseUrl,{params:r})}},{key:"obterVideo",value:function(o){return this.http.get("".concat(this.baseUrl,"/").concat(o))}},{key:"criarVideo",value:function(o){return this.http.post(this.baseUrl,o)}},{key:"atualizarVideo",value:function(o,r){return this.http.put("".concat(this.baseUrl,"/").concat(o),r)}},{key:"excluirVideo",value:function(o){return this.http.delete("".concat(this.baseUrl,"/").concat(o))}},{key:"filtrarVideos",value:function(o){var r=new T.LE;for(var t in o){var l=o[t];null!=l&&""!==l.toString().trim()&&(r=r.append(t,l.toString()))}return this.http.get("".concat(this.baseUrl,"/filtrar"),{params:r})}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function X(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",17),e._uU(2,"T\xedtulo "),e._UZ(3,"p-sortIcon",18),e.qZA(),e.TgZ(4,"th",19),e._uU(5,"Nome "),e._UZ(6,"p-sortIcon",20),e.qZA(),e.TgZ(7,"th",21),e._uU(8,"Ativo "),e._UZ(9,"p-sortIcon",22),e.qZA()())}function K(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"tr",23),e.NdJ("click",function(){var l=e.CHM(a).$implicit,c=e.oxw(2);return e.KtG(c.editVideo(l))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()}if(2&i){var o=n.$implicit;e.xp6(2),e.Oqu(o.titulo),e.xp6(2),e.Oqu(o.nome),e.xp6(2),e.Oqu(o.ativo?"Sim":"N\xe3o")}}var W=function(){return[10,20,30,50]};function ee(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"p-table",14),e.NdJ("onLazyLoad",function(t){e.CHM(a);var l=e.oxw();return e.KtG(l.loadData(t))}),e.YNc(1,X,10,0,"ng-template",15),e.YNc(2,K,7,3,"ng-template",16),e.qZA()}if(2&i){var o=e.oxw();e.Q6J("value",o.videos)("lazy",!0)("loading",o.isLoading)("paginator",!0)("rows",o.searchParams.tamanho)("totalRecords",o.totalRecords)("rowsPerPageOptions",e.DdM(7,W))}}var oe=function(){return{label:"Ativo",value:"true"}},te=function(){return{label:"Inativo",value:"false"}},ae=function(){return{label:"Todos",value:""}},ie=function(n,a,o){return[n,a,o]},re=function(){var i=function(){function n(a,o,r,t){(0,f.Z)(this,n),this.videoService=a,this.notificationService=o,this.router=r,this.cdRef=t,this.videos=[],this.previousSearchParams=null,this.searchParams={pagina:0,tamanho:30,ordenacao:"titulo",direcao:"asc"},this.isLoading=!1,this.totalRecords=0,this.searchForm=new s.cw({nome:new s.NI(null),titulo:new s.NI(null),ativo:new s.NI(null),descricao:new s.NI(null),url:new s.NI(null)})}return(0,h.Z)(n,[{key:"handleFormSubmit",value:function(o){var r,t,l,c,m,d=this,w={nome:null!==(r=o.nome)&&void 0!==r?r:"",titulo:null!==(t=o.titulo)&&void 0!==t?t:"",ativo:null!==(l=o.ativo)&&void 0!==l?l:void 0,descricao:null!==(c=o.descricao)&&void 0!==c?c:"",url:null!==(m=o.url)&&void 0!==m?m:"",direcao:this.searchParams.direcao,ordenacao:this.searchParams.ordenacao,pagina:this.searchParams.pagina,tamanho:this.searchParams.tamanho};this.searchParams=(0,g.Z)((0,g.Z)({},this.searchParams),w),JSON.stringify(this.searchParams)!==JSON.stringify(this.previousSearchParams)&&(this.isLoading=!0,this.cdRef.detectChanges(),this.previousSearchParams=(0,g.Z)({},this.searchParams),this.videoService.filtrarVideos(this.searchParams).subscribe({next:function(N){d.notificationService.showSuccess("Sucesso","Busca realizada com sucesso!"),d.videos=N.resultados,d.isLoading=!1,d.totalRecords=N.totalElementos,d.cdRef.detectChanges()},error:function(N){d.notificationService.showError("Erro","Erro ao carregar dados"),d.isLoading=!1}}))}},{key:"editVideo",value:function(o){o&&this.router.navigate(["/biblioteca/video",o.uuid])}},{key:"addNewVideo",value:function(){this.router.navigate(["/biblioteca/video/novo"])}},{key:"loadData",value:function(o){this.searchParams.pagina=void 0!==o.first&&o.rows?o.first/o.rows:0,this.searchParams.tamanho=o.rows?o.rows:50,this.searchParams.ordenacao=Array.isArray(o.sortField)?o.sortField.length>0?o.sortField[0]:"":null!==o.sortField?o.sortField:void 0,this.searchParams.direcao=1===o.sortOrder?"asc":"desc",this.handleFormSubmit(this.searchForm.value)}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(k),e.Y36(b.g),e.Y36(p.F0),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-video"]],decls:24,vars:12,consts:[[1,"card"],[1,"formgroup-inline",3,"formGroup","ngSubmit"],[1,"field"],["for","titulo",1,"p-sr-only"],["id","titulo","formControlName","titulo","pInputText","","placeholder","T\xedtulo do V\xeddeo",1,"p-2"],["for","descricao",1,"p-sr-only"],["id","descricao","formControlName","descricao","pInputText","","placeholder","Descri\xe7\xe3o do V\xeddeo",1,"p-2"],["for","nome",1,"p-sr-only"],["id","Nome","formControlName","descricao","pInputText","","placeholder","Nome do V\xeddeo",1,"p-2"],["for","ativo",1,"p-sr-only"],["id","ativo","formControlName","ativo","placeholder","Ativo",3,"options"],["type","submit","label","Buscar",3,"disabled","loading"],["label","Novo","icon","pi pi-plus",1,"ml-3",3,"onClick"],["class","p-datatable-striped  animate-fade-in","sortMode","single",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad",4,"ngIf"],["sortMode","single",1,"p-datatable-striped","animate-fade-in",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","titulo"],["field","titulo"],["pSortableColumn","nome"],["field","nome"],["pSortableColumn","ativo"],["field","ativo"],[1,"clickable-row","zebrado",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Busca de V\xeddeos"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.handleFormSubmit(o.searchForm.value)}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"T\xedtulo"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Descri\xe7\xe3o"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",2)(13,"label",7),e._uU(14,"Nome"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"div",2)(17,"label",9),e._uU(18,"Ativo"),e.qZA(),e._UZ(19,"p-dropdown",10),e.qZA(),e._UZ(20,"p-button",11),e.TgZ(21,"p-button",12),e.NdJ("onClick",function(){return o.addNewVideo()}),e.qZA()()(),e.TgZ(22,"div"),e.YNc(23,ee,3,8,"p-table",13),e.qZA()),2&a&&(e.xp6(3),e.Q6J("formGroup",o.searchForm),e.xp6(16),e.Q6J("options",e.kEZ(8,ie,e.DdM(5,oe),e.DdM(6,te),e.DdM(7,ae))),e.xp6(1),e.Q6J("disabled",!o.searchForm.valid||o.isLoading)("loading",o.isLoading),e.xp6(3),e.Q6J("ngIf",o.videos))},dependencies:[S.O5,_.zx,Z.jx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.Lt,v.iA,v.lQ,v.fz]}),i}(),I=u(9397);function ne(i){return i.value&&!/^(https?:\/\/)?([A-Za-z0-9.-]+)\.([A-Za-z]{2,63})([\S]*)$/.test(i.value)?{urlInvalid:!0}:null}var V=function(){var i=function(){function n(a,o,r,t,l,c){(0,f.Z)(this,n),this.fb=a,this.videoService=o,this.notificationService=r,this.router=t,this.route=l,this.temaService=c,this.videoForm=new s.cw({}),this.uuid=null,this.temaOptions=[]}return(0,h.Z)(n,[{key:"ngOnInit",value:function(){var o=this;this.videoForm=this.fb.group({nome:["",s.kI.required],titulo:["",s.kI.required],ativo:[!0,s.kI.required],descricao:["",s.kI.required],url:["",[s.kI.required,ne]],tema:["",s.kI.required]}),this.loadTemas();var r=this.route.snapshot.paramMap.get("id");r&&"novo"!==r&&this.videoService.obterVideo(r).pipe((0,q.w)(function(t){return t&&(o.uuid=t.uuid?t.uuid:"",o.videoForm.patchValue({titulo:t.titulo,ativo:t.ativo,descricao:t.descricao,url:t.url,nome:t.nome,tema:t.tema})),(0,A.of)(null)})).subscribe({error:function(l){console.error(l),o.notificationService.showError("Erro","Erro ao carregar dados")}})}},{key:"loadTemas",value:function(){var o=this;this.temaService.getTemas().pipe((0,I.b)(function(r){o.temaOptions=r.map(function(t){return{label:t.nome,value:t.uuid}})})).subscribe()}},{key:"onSubmit",value:function(){var o=this;this.videoForm.valid&&(this.uuid?this.videoService.atualizarVideo(this.uuid,this.videoForm.value).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","V\xeddeo atualizado com sucesso"),o.router.navigate(["/biblioteca/video"])},error:function(t){console.error(t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao atualizar o v\xeddeo")}}):this.videoService.criarVideo(this.videoForm.value).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","V\xeddeo criado com sucesso"),o.router.navigate(["/biblioteca/video"])},error:function(t){console.error("Ocorreu um erro ao criar o v\xeddeo",t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao criar o v\xeddeo")}}))}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(s.qu),e.Y36(k),e.Y36(b.g),e.Y36(p.F0),e.Y36(p.gz),e.Y36(C.d))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-video-detalhe"]],decls:31,vars:4,consts:[["header","Detalhes do V\xeddeo"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12","flex","flex-column"],["htmlFor","nome"],["pInputText","","id","nome","formControlName","nome","placeholder","Nome do V\xeddeo",1,"p-2"],["htmlFor","titulo"],["pInputText","","id","titulo","formControlName","titulo","placeholder","T\xedtulo do V\xeddeo",1,"p-2"],["for","descricao"],["pInputText","","id","descricao","formControlName","descricao","placeholder","Descri\xe7\xe3o do V\xeddeo",1,"p-2"],["for","url"],["pInputText","","id","url","formControlName","url","placeholder","URL do V\xeddeo",1,"p-2"],["htmlFor","tema"],["id","tema","formControlName","tema","placeholder","Selecione um Tema",3,"options"],[1,"field","col-12","md:col-12"],["for","ativo"],["id","ativo","formControlName","ativo",3,"binary"],[1,"field","col-12","md:col-1"],["label","Voltar",1,"p-button-secondary","p-mr-2",3,"onClick"],["type","submit","label","Salvar",3,"disabled"]],template:function(a,o){1&a&&(e.TgZ(0,"p-card",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Nome"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"T\xedtulo"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",3)(12,"label",8),e._uU(13,"Descri\xe7\xe3o"),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",3)(16,"label",10),e._uU(17,"URL"),e.qZA(),e._UZ(18,"input",11),e.qZA(),e.TgZ(19,"div",3)(20,"label",12),e._uU(21,"Tema"),e.qZA(),e._UZ(22,"p-dropdown",13),e.qZA(),e.TgZ(23,"div",14)(24,"label",15),e._uU(25,"Ativo"),e.qZA(),e._UZ(26,"p-checkbox",16),e.qZA(),e.TgZ(27,"div",17)(28,"p-button",18),e.NdJ("onClick",function(){return o.router.navigate(["/biblioteca/video"])}),e.qZA()(),e.TgZ(29,"div",17),e._UZ(30,"p-button",19),e.qZA()()()()),2&a&&(e.xp6(1),e.Q6J("formGroup",o.videoForm),e.xp6(21),e.Q6J("options",o.temaOptions),e.xp6(4),e.Q6J("binary",!0),e.xp6(4),e.Q6J("disabled",!o.videoForm.valid))},dependencies:[_.zx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.Lt,y.XZ,F.Z]}),i}(),L=function(){var i=function(){function n(a){(0,f.Z)(this,n),this.http=a,this.baseUrl="".concat(J.N.apiContext,"/extra")}return(0,h.Z)(n,[{key:"getExtraById",value:function(o){return this.http.get("".concat(this.baseUrl,"/").concat(o))}},{key:"updateExtra",value:function(o,r){return this.http.put("".concat(this.baseUrl,"/").concat(o),r)}},{key:"deleteExtra",value:function(o){return this.http.delete("".concat(this.baseUrl,"/").concat(o))}},{key:"getExtras",value:function(o){var r=new T.LE;return null!=o&&(r=r.set("ativo",o.toString())),this.http.get(this.baseUrl,{params:r})}},{key:"createExtra",value:function(o){return this.http.post(this.baseUrl,o)}},{key:"uploadExtraFile",value:function(o,r){var t=new FormData;return t.append("file",r),this.http.post("".concat(this.baseUrl,"/file/").concat(o),t)}},{key:"deleteExtraFile",value:function(o){return this.http.delete("".concat(this.baseUrl,"/file/").concat(o))}},{key:"getFilteredExtras",value:function(o){var r=new T.LE;for(var t in o)if(null!=o[t]&&""!==o[t]){var l=o[t].toString();r=r.set(t,l)}return this.http.get("".concat(this.baseUrl,"/filtrar"),{params:r})}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.LFG(T.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function se(i,n){1&i&&(e.TgZ(0,"tr")(1,"th",17),e._uU(2,"T\xedtulo "),e._UZ(3,"p-sortIcon",18),e.qZA(),e.TgZ(4,"th",19),e._uU(5,"Nome "),e._UZ(6,"p-sortIcon",20),e.qZA(),e.TgZ(7,"th",21),e._uU(8,"Ativo "),e._UZ(9,"p-sortIcon",22),e.qZA()())}function le(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"tr",23),e.NdJ("click",function(){var l=e.CHM(a).$implicit,c=e.oxw(2);return e.KtG(c.editExtra(l))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()}if(2&i){var o=n.$implicit;e.xp6(2),e.Oqu(o.titulo),e.xp6(2),e.Oqu(o.nome),e.xp6(2),e.Oqu(o.ativo?"Sim":"N\xe3o")}}var ce=function(){return[10,20,30,50]};function ue(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"p-table",14),e.NdJ("onLazyLoad",function(t){e.CHM(a);var l=e.oxw();return e.KtG(l.loadData(t))}),e.YNc(1,se,10,0,"ng-template",15),e.YNc(2,le,7,3,"ng-template",16),e.qZA()}if(2&i){var o=e.oxw();e.Q6J("value",o.extras)("lazy",!0)("loading",o.isLoading)("paginator",!0)("rows",o.searchParams.tamanho)("totalRecords",o.totalRecords)("rowsPerPageOptions",e.DdM(7,ce))}}var de=function(){return{label:"Ativo",value:"true"}},me=function(){return{label:"Inativo",value:"false"}},pe=function(){return{label:"Todos",value:""}},he=function(n,a,o){return[n,a,o]},fe=function(){var i=function(){function n(a,o,r,t){(0,f.Z)(this,n),this.extraService=a,this.notificationService=o,this.router=r,this.cdRef=t,this.extras=[],this.previousSearchParams=null,this.searchParams={pagina:0,tamanho:30,ordenacao:"titulo",direcao:"asc"},this.isLoading=!1,this.totalRecords=0,this.searchForm=new s.cw({nome:new s.NI(null),titulo:new s.NI(null),ativo:new s.NI(null),descricao:new s.NI(null)})}return(0,h.Z)(n,[{key:"handleFormSubmit",value:function(o){var r,t,l,c,m=this,d={nome:null!==(r=o.nome)&&void 0!==r?r:"",titulo:null!==(t=o.titulo)&&void 0!==t?t:"",ativo:null!==(l=o.ativo)&&void 0!==l?l:void 0,descricao:null!==(c=o.descricao)&&void 0!==c?c:"",direcao:this.searchParams.direcao,ordenacao:this.searchParams.ordenacao,pagina:this.searchParams.pagina,tamanho:this.searchParams.tamanho};this.searchParams=(0,g.Z)((0,g.Z)({},this.searchParams),d),JSON.stringify(this.searchParams)!==JSON.stringify(this.previousSearchParams)&&(this.isLoading=!0,this.cdRef.detectChanges(),this.previousSearchParams=(0,g.Z)({},this.searchParams),this.extraService.getFilteredExtras(this.searchParams).subscribe({next:function(E){m.notificationService.showSuccess("Sucesso","Busca realizada com sucesso!"),m.extras=E.resultados,m.isLoading=!1,m.totalRecords=E.totalElementos,m.cdRef.detectChanges()},error:function(E){m.notificationService.showError("Erro","Erro ao carregar dados"),m.isLoading=!1}}))}},{key:"editExtra",value:function(o){o&&this.router.navigate(["/biblioteca/extra",o.uuid])}},{key:"addNewExtra",value:function(){this.router.navigate(["/biblioteca/extra/novo"])}},{key:"loadData",value:function(o){this.searchParams.pagina=void 0!==o.first&&o.rows?o.first/o.rows:0,this.searchParams.tamanho=o.rows?o.rows:50,this.searchParams.ordenacao=Array.isArray(o.sortField)?o.sortField.length>0?o.sortField[0]:"":null!==o.sortField?o.sortField:void 0,this.searchParams.direcao=1===o.sortOrder?"asc":"desc",this.handleFormSubmit(this.searchForm.value)}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(L),e.Y36(b.g),e.Y36(p.F0),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-extra"]],decls:24,vars:12,consts:[[1,"card"],[1,"formgroup-inline",3,"formGroup","ngSubmit"],[1,"field"],["for","titulo",1,"p-sr-only"],["id","titulo","formControlName","titulo","pInputText","","placeholder","T\xedtulo do Extra",1,"p-2"],["for","descricao",1,"p-sr-only"],["id","descricao","formControlName","descricao","pInputText","","placeholder","Descri\xe7\xe3o do Extra",1,"p-2"],["for","nome",1,"p-sr-only"],["id","Nome","formControlName","descricao","pInputText","","placeholder","Nome do Extra",1,"p-2"],["for","ativo",1,"p-sr-only"],["id","ativo","formControlName","ativo","placeholder","Ativo",3,"options"],["type","submit","label","Buscar",3,"disabled","loading"],["label","Novo","icon","pi pi-plus",1,"ml-3",3,"onClick"],["class","p-datatable-striped  animate-fade-in","sortMode","single",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad",4,"ngIf"],["sortMode","single",1,"p-datatable-striped","animate-fade-in",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","titulo"],["field","titulo"],["pSortableColumn","nome"],["field","nome"],["pSortableColumn","ativo"],["field","ativo"],[1,"clickable-row","zebrado",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Busca de Extra"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.handleFormSubmit(o.searchForm.value)}),e.TgZ(4,"div",2)(5,"label",3),e._uU(6,"T\xedtulo"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"div",2)(9,"label",5),e._uU(10,"Descri\xe7\xe3o"),e.qZA(),e._UZ(11,"input",6),e.qZA(),e.TgZ(12,"div",2)(13,"label",7),e._uU(14,"Nome"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"div",2)(17,"label",9),e._uU(18,"Ativo"),e.qZA(),e._UZ(19,"p-dropdown",10),e.qZA(),e._UZ(20,"p-button",11),e.TgZ(21,"p-button",12),e.NdJ("onClick",function(){return o.addNewExtra()}),e.qZA()()(),e.TgZ(22,"div"),e.YNc(23,ue,3,8,"p-table",13),e.qZA()),2&a&&(e.xp6(3),e.Q6J("formGroup",o.searchForm),e.xp6(16),e.Q6J("options",e.kEZ(8,he,e.DdM(5,de),e.DdM(6,me),e.DdM(7,pe))),e.xp6(1),e.Q6J("disabled",!o.searchForm.valid||o.isLoading)("loading",o.isLoading),e.xp6(3),e.Q6J("ngIf",o.extras))},dependencies:[S.O5,_.zx,Z.jx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.Lt,v.iA,v.lQ,v.fz]}),i}(),ve=u(7398),z=u(6068);function ge(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"div",12)(1,"a",23),e._uU(2,"Fazer Download"),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){e.CHM(a);var t=e.oxw(2);return e.KtG(t.deleteFile())}),e._uU(4,"Remover arquivo"),e.qZA()()}if(2&i){var o=e.oxw(2);e.xp6(1),e.s9C("href",o.url,e.LSH)}}function _e(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"p-card",19)(1,"div",3)(2,"label",20),e._uU(3,"Arquivo:"),e.qZA(),e.TgZ(4,"p-fileUpload",21),e.NdJ("uploadHandler",function(t){e.CHM(a);var l=e.oxw();return e.KtG(l.uploadFile(t))}),e.qZA()(),e.YNc(5,ge,5,1,"div",22),e.qZA()}if(2&i){var o=e.oxw();e.xp6(4),e.Q6J("customUpload",!0)("disabled",o.isUploading),e.xp6(1),e.Q6J("ngIf",o.temArquivo)}}var Y=function(){var i=function(){function n(a,o,r,t,l,c,m){(0,f.Z)(this,n),this.fb=a,this.extraService=o,this.notificationService=r,this.router=t,this.route=l,this.confirmationService=c,this.temaService=m,this.extraForm=new s.cw({}),this.uuid=null,this.temArquivo=!1,this.temaOptions=[],this.url="",this.isUploading=!1}return(0,h.Z)(n,[{key:"ngOnInit",value:function(){var o=this;this.extraForm=this.fb.group({nome:["",s.kI.required],titulo:["",s.kI.required],ativo:[!0,s.kI.required],descricao:["",s.kI.required],tema:["",s.kI.required]}),this.loadTemas().subscribe(function(){o.loadExtra()})}},{key:"loadTemas",value:function(){var o=this;return 0===this.temaOptions.length?this.temaService.getTemas().pipe((0,I.b)(function(r){o.temaOptions=r.map(function(t){return{label:t.nome,value:t.uuid}})}),(0,ve.U)(function(){return null})):(0,A.of)(null)}},{key:"loadExtra",value:function(){var o=this,r=this.route.snapshot.paramMap.get("id");r&&"novo"!==r&&this.extraService.getExtraById(r).pipe((0,q.w)(function(t){return t&&(o.uuid=t.uuid?t.uuid:"",o.temArquivo=null!==t.url,o.url=null!==t.url?t.url:"",o.extraForm.patchValue({titulo:t.titulo,ativo:t.ativo,descricao:t.descricao,nome:t.nome,tema:t.tema})),(0,A.of)(null)})).subscribe({error:function(l){console.error(l),o.notificationService.showError("Erro","Erro ao carregar dados")}})}},{key:"onSubmit",value:function(){var o=this;this.extraForm.valid&&(this.uuid?this.extraService.updateExtra(this.uuid,this.extraForm.value).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","Extra atualizado com sucesso")},error:function(t){console.error(t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao atualizar o extra")}}):this.extraService.createExtra(this.extraForm.value).subscribe({next:function(t){o.notificationService.showSuccess("Sucesso","Extra criado com sucesso"),o.uuid=t.uuid,o.router.navigate(["/biblioteca/extra",t.uuid])},error:function(t){console.error("Ocorreu um erro ao criar o extra",t),o.notificationService.showError("Erro",t&&t.message?t.message:"Erro ao criar o extra")}}))}},{key:"uploadFile",value:function(o){var r=this;if(this.isUploading)this.notificationService.showWarn("Aviso","Voc\xea j\xe1 esta fazendo o upload de um arquivo.");else{var t=o.files[0];t?this.uuid?this.temArquivo?this.confirmationService.confirm({message:"Voc\xea tem certeza que deseja substituir o arquivo atual ?",accept:function(){r.enviarArquivo(t)}}):this.enviarArquivo(t):this.notificationService.showError("Erro","UUID n\xe3o est\xe1 dispon\xedvel"):this.notificationService.showError("Erro","Nenhum arquivo foi selecionado")}}},{key:"enviarArquivo",value:function(o){var r=this;this.uuid&&(this.isUploading=!0,this.extraService.uploadExtraFile(this.uuid,o).subscribe({next:function(){r.notificationService.showSuccess("Sucesso","Arquivo enviado com sucesso"),r.loadExtra()},error:function(l){r.notificationService.showError("Erro",l&&l.message?l.message:"Erro ao enviar o arquivo")},complete:function(){r.isUploading=!1}}))}},{key:"deleteFile",value:function(){var o=this;this.uuid&&this.confirmationService.confirm({message:"Voc\xea tem certeza que deseja remover este arquivo?",accept:function(){o.uuid&&o.extraService.deleteExtraFile(o.uuid).subscribe({next:function(){o.notificationService.showSuccess("Sucesso","Arquivo removido com sucesso"),o.loadExtra()},error:function(l){o.notificationService.showError("Erro",l&&l.message?l.message:"Erro ao remover o arquivo")}})}})}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(s.qu),e.Y36(L),e.Y36(b.g),e.Y36(p.F0),e.Y36(p.gz),e.Y36(Z.YP),e.Y36(C.d))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-extra-detalhe"]],decls:29,vars:5,consts:[["header","Detalhes do Extra"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12","flex","flex-column"],["htmlFor","nome"],["pInputText","","id","nome","formControlName","nome","placeholder","Nome do Extra",1,"p-2"],["htmlFor","titulo"],["pInputText","","id","titulo","formControlName","titulo","placeholder","T\xedtulo do Extra",1,"p-2"],["for","descricao"],["pInputText","","id","descricao","formControlName","descricao","placeholder","Descri\xe7\xe3o do Extra",1,"p-2"],["htmlFor","tema"],["id","tema","formControlName","tema","placeholder","Selecione um Tema",3,"options"],[1,"field","col-12","md:col-12"],["for","ativo"],["id","ativo","formControlName","ativo",3,"binary"],[1,"field","col-12","md:col-1"],["label","Voltar",1,"p-button-secondary","p-mr-2",3,"onClick"],["type","submit","label","Salvar",3,"disabled"],["header","Anexar Arquivo",4,"ngIf"],["header","Anexar Arquivo"],["for","file"],["id","file","name","file",3,"customUpload","disabled","uploadHandler"],["class","field col-12 md:col-12",4,"ngIf"],["download","",1,"p-button","p-button-success","mr-2",3,"href"],["pButton","",1,"p-button-danger",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"p-card",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Nome"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",6),e._uU(9,"T\xedtulo"),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",3)(12,"label",8),e._uU(13,"Descri\xe7\xe3o"),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"div",3)(16,"label",10),e._uU(17,"Tema"),e.qZA(),e._UZ(18,"p-dropdown",11),e.qZA(),e.TgZ(19,"div",12)(20,"label",13),e._uU(21,"Ativo"),e.qZA(),e._UZ(22,"p-checkbox",14),e.qZA(),e.TgZ(23,"div",15)(24,"p-button",16),e.NdJ("onClick",function(){return o.router.navigate(["/biblioteca/extra"])}),e.qZA()(),e.TgZ(25,"div",15),e._UZ(26,"p-button",17),e.qZA()()()(),e.YNc(27,_e,6,3,"p-card",18),e._UZ(28,"p-confirmDialog")),2&a&&(e.xp6(1),e.Q6J("formGroup",o.extraForm),e.xp6(17),e.Q6J("options",o.temaOptions),e.xp6(4),e.Q6J("binary",!0),e.xp6(4),e.Q6J("disabled",!o.extraForm.valid),e.xp6(1),e.Q6J("ngIf",o.uuid))},dependencies:[S.O5,_.Hq,_.zx,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.Lt,y.XZ,F.Z,z.p,U.Q]}),i}(),be=[{path:"tema",component:H},{path:"tema/:id",component:P},{path:"tema/novo",component:P},{path:"video",component:re},{path:"video/:id",component:V},{path:"video/novo",component:V},{path:"extra",component:fe},{path:"extra/:id",component:Y},{path:"extra/novo",component:Y},{path:"**",redirectTo:"/notfound"}],Ze=function(){var i=(0,h.Z)(function n(){(0,f.Z)(this,n)});return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(be),p.Bz]}),i}(),xe=function(){var i=(0,h.Z)(function n(){(0,f.Z)(this,n)});return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Z.YP],imports:[S.ez,Ze,_.hJ,s.UX,x.kW,v.U$,y.nD,F.d,z.O,U.D]}),i}()}}]);