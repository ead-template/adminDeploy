"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[461],{4461:(Y,x,n)=>{n.r(x),n.d(x,{CursoModule:()=>q});var h=n(3144),v=n(5671),Z=n(6814),y=n(7210),C=n(1413),s=n(6223),o=n(9329),M=n(4942),A=n(7685),U=n(553),T=n(9862),N=function(){var r=function(){function a(e){(0,v.Z)(this,a),this.http=e,this.apiUrl="".concat(U.N.apiContext,"/course")}return(0,h.Z)(a,[{key:"getCursoById",value:function(t){return this.http.get("".concat(this.apiUrl,"/").concat(t))}},{key:"atualizarCurso",value:function(t,i){return this.http.put("".concat(this.apiUrl,"/").concat(t),i)}},{key:"deletarCurso",value:function(t){return this.http.delete("".concat(this.apiUrl,"/").concat(t))}},{key:"obterCursos",value:function(t){var i=Object.entries(t).reduce(function(l,p){var m=(0,A.Z)(p,2),c=m[0],f=m[1];return null!=f&&f?(0,C.Z)((0,C.Z)({},l),{},(0,M.Z)({},c,String(f))):l},{}),u=new T.LE({fromObject:i});return this.http.get(this.apiUrl,{params:u})}},{key:"criarCurso",value:function(t){return this.http.post(this.apiUrl,t)}}]),a}();return r.\u0275fac=function(e){return new(e||r)(o.LFG(T.eN))},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),F=n(6896),P=n(707),E=n(5219),g=n(4171),S=n(2160);function w(r,a){1&r&&(o.TgZ(0,"tr")(1,"th",19),o._uU(2,"T\xedtulo "),o._UZ(3,"p-sortIcon",20),o.qZA(),o.TgZ(4,"th",21),o._uU(5,"Professor "),o._UZ(6,"p-sortIcon",22),o.qZA(),o.TgZ(7,"th",23),o._uU(8,"Ativo "),o._UZ(9,"p-sortIcon",24),o.qZA(),o.TgZ(10,"th",25),o._uU(11,"Pre\xe7o "),o._UZ(12,"p-sortIcon",26),o.qZA()())}function L(r,a){if(1&r){var e=o.EpF();o.TgZ(0,"tr",27),o.NdJ("click",function(){var l=o.CHM(e).$implicit,p=o.oxw(2);return o.KtG(p.editCourse(l))}),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td",28),o._uU(8),o.ALo(9,"currency"),o.qZA()()}if(2&r){var t=a.$implicit;o.xp6(2),o.Oqu(t.titulo),o.xp6(2),o.Oqu(t.professor.nome),o.xp6(2),o.Oqu(t.ativo?"Sim":"N\xe3o"),o.xp6(2),o.Oqu(o.gM2(9,4,t.preco,"BRL",!0,"1.2-2"))}}var I=function(){return[10,20,30,50]};function z(r,a){if(1&r){var e=o.EpF();o.TgZ(0,"p-table",16),o.NdJ("onLazyLoad",function(u){o.CHM(e);var l=o.oxw();return o.KtG(l.loadData(u))}),o.YNc(1,w,13,0,"ng-template",17),o.YNc(2,L,10,9,"ng-template",18),o.qZA()}if(2&r){var t=o.oxw();o.Q6J("value",t.cursos)("lazy",!0)("loading",t.isLoading)("paginator",!0)("rows",t.searchParams.tamanho)("totalRecords",t.totalRecords)("rowsPerPageOptions",o.DdM(7,I))}}var J=function(){return{label:"Ativo",value:"true"}},_=function(){return{label:"Inativo",value:"false"}},D=function(){return{label:"Todos",value:""}},O=function(a,e,t){return[a,e,t]},R=function(){var r=function(){function a(e,t,i,u){(0,v.Z)(this,a),this.cursoService=e,this.notificationService=t,this.router=i,this.cdRef=u,this.cursos=[],this.previousSearchParams=null,this.searchParams={titulo:"",professor:"",ativo:null,precoMin:null,precoMax:null,pagina:0,tamanho:10,ordenacao:"titulo",direcao:"ASC"},this.isLoading=!1,this.totalRecords=0,this.searchForm=new s.cw({titulo:new s.NI(null),professor:new s.NI(null),ativo:new s.NI(null),precoMin:new s.NI(null),precoMax:new s.NI(null)})}return(0,h.Z)(a,[{key:"onSort",value:function(t){this.searchParams.ordenacao=t.field,this.searchParams.direcao=1===t.order?"ASC":"DESC",this.handleFormSubmit(this.searchParams)}},{key:"handleFormSubmit",value:function(t){var i,u,l,p,m,c=this,f={titulo:null!==(i=t.titulo)&&void 0!==i?i:"",professor:null!==(u=t.professor)&&void 0!==u?u:"",ativo:null!==(l=t.ativo)&&void 0!==l?l:void 0,precoMin:null!==(p=t.precoMin)&&void 0!==p?p:void 0,precoMax:null!==(m=t.precoMax)&&void 0!==m?m:void 0,ordenacao:this.searchParams.ordenacao,direcao:this.searchParams.direcao,pagina:this.searchParams.pagina,tamanho:this.searchParams.tamanho};this.searchParams=(0,C.Z)((0,C.Z)({},this.searchParams),f),JSON.stringify(this.searchParams)!==JSON.stringify(this.previousSearchParams)&&(this.isLoading=!0,this.cdRef.detectChanges(),this.previousSearchParams=(0,C.Z)({},this.searchParams),this.cursoService.obterCursos(this.searchParams).subscribe({next:function(d){c.notificationService.showSuccess("Sucesso","Busca realizada com sucesso!"),c.cursos=d.resultados,c.isLoading=!1,c.totalRecords=d.totalElementos,c.cdRef.detectChanges()},error:function(d){console.error("Error:",d),c.notificationService.showError("Erro",d&&d.message?d.message:"N\xe3o foi poss\xedvel buscar os cursos! Tente novamente mais tarde"),c.isLoading=!1}}))}},{key:"editCourse",value:function(t){t&&this.router.navigate(["/admin/curso",t.uuid])}},{key:"addNewCourse",value:function(){this.router.navigate(["/admin/curso/novo"])}},{key:"loadData",value:function(t){this.searchParams.pagina=void 0!==t.first&&t.rows?t.first/t.rows:0,this.searchParams.tamanho=t.rows?t.rows:10,this.searchParams.ordenacao=Array.isArray(t.sortField)?t.sortField.length>0?t.sortField[0]:"titulo":void 0!==t.sortField?t.sortField:"titulo",this.searchParams.direcao=1===t.sortOrder?"ASC":"DESC",this.handleFormSubmit(this.searchForm.value)}}]),a}();return r.\u0275fac=function(e){return new(e||r)(o.Y36(N),o.Y36(F.g),o.Y36(y.F0),o.Y36(o.sBO))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-curso"]],decls:28,vars:12,consts:[[1,"card"],[1,"formgroup-inline",3,"formGroup","ngSubmit"],[1,"field"],["for","titulo",1,"p-sr-only"],["id","titulo","formControlName","titulo","pInputText","","placeholder","T\xedtulo do Curso",1,"p-2"],["for","professor",1,"p-sr-only"],["id","professor","formControlName","professor","pInputText","","placeholder","Nome do Professor",1,"p-2"],["for","precoMin",1,"p-sr-only"],["id","precoMin","formControlName","precoMin","pInputText","","placeholder","Pre\xe7o M\xednimo","type","number",1,"p-2"],["for","precoMax",1,"p-sr-only"],["id","precoMax","formControlName","precoMax","pInputText","","placeholder","Pre\xe7o M\xe1ximo","type","number",1,"p-2"],["for","ativo",1,"p-sr-only"],["id","ativo","formControlName","ativo","placeholder","Ativo",3,"options"],["type","submit","label","Buscar",3,"disabled","loading"],["label","Novo","icon","pi pi-plus",1,"ml-3",3,"onClick"],["class","p-datatable-striped animate-fade-in","sortMode","single",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad",4,"ngIf"],["sortMode","single",1,"p-datatable-striped","animate-fade-in",3,"value","lazy","loading","paginator","rows","totalRecords","rowsPerPageOptions","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","titulo"],["field","titulo"],["pSortableColumn","professor"],["field","professor"],["pSortableColumn","ativo"],["field","ativo"],["pSortableColumn","preco",1,"text-right"],["field","preco"],[1,"clickable-row","zebrado",3,"click"],[1,"text-right"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0)(1,"h3"),o._uU(2,"Busca de Cursos"),o.qZA(),o.TgZ(3,"form",1),o.NdJ("ngSubmit",function(){return t.handleFormSubmit(t.searchForm.value)}),o.TgZ(4,"div",2)(5,"label",3),o._uU(6,"T\xedtulo"),o.qZA(),o._UZ(7,"input",4),o.qZA(),o.TgZ(8,"div",2)(9,"label",5),o._uU(10,"Professor"),o.qZA(),o._UZ(11,"input",6),o.qZA(),o.TgZ(12,"div",2)(13,"label",7),o._uU(14,"Pre\xe7o M\xednimo"),o.qZA(),o._UZ(15,"input",8),o.qZA(),o.TgZ(16,"div",2)(17,"label",9),o._uU(18,"Pre\xe7o M\xe1ximo"),o.qZA(),o._UZ(19,"input",10),o.qZA(),o.TgZ(20,"div",2)(21,"label",11),o._uU(22,"Ativo"),o.qZA(),o._UZ(23,"p-dropdown",12),o.qZA(),o._UZ(24,"p-button",13),o.TgZ(25,"p-button",14),o.NdJ("onClick",function(){return t.addNewCourse()}),o.qZA()()(),o.TgZ(26,"div"),o.YNc(27,z,3,8,"p-table",15),o.qZA()),2&e&&(o.xp6(3),o.Q6J("formGroup",t.searchForm),o.xp6(20),o.Q6J("options",o.kEZ(8,O,o.DdM(5,J),o.DdM(6,_),o.DdM(7,D))),o.xp6(1),o.Q6J("disabled",!t.searchForm.valid||t.isLoading)("loading",t.isLoading),o.xp6(3),o.Q6J("ngIf",t.cursos))},dependencies:[Z.O5,P.zx,E.jx,g.iA,g.lQ,g.fz,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,S.Lt,Z.H9],styles:[".text-right[_ngcontent-%COMP%]{text-align:right}"]}),r}(),b=function(){var r=(0,h.Z)(function a(){(0,v.Z)(this,a)});return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-curso-gestao"]],decls:2,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"p"),o._uU(1,"curso-gestao works!"),o.qZA())}}),r}(),k=[{path:"curso",component:R},{path:"curso/:id",component:b},{path:"curso/novo",component:b},{path:"**",redirectTo:"/notfound"}],B=function(){var r=(0,h.Z)(function a(){(0,v.Z)(this,a)});return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[y.Bz.forChild(k),y.Bz]}),r}(),q=function(){var r=(0,h.Z)(function a(){(0,v.Z)(this,a)});return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[Z.ez,B,P.hJ,g.U$,s.UX,S.kW]}),r}()}}]);